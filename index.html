<html>

	<head>
		<title>Live Coding with Csound</title>
		<link rel="stylesheet" href="web/codemirror.css">
		<link rel="stylesheet" href="web/theme/monokai.css">
		<link rel="stylesheet" href="web/cslivecode.css">
		<script src="web/codemirror.js"></script>
		<script src="web/mode/csound/csound.js"></script>
	</head>

	<body>
    <div id="loadDiv">
      <code>... L O A D I N G &nbsp; C S O U N D ...</code>
    </div>
		<textarea id="csoundCodeEditor">
;; FETCHING start.orc code...
</textarea>
		<script>

function evalCode() {
	cs.compileOrc(editor.getSelection());
}

var editor = CodeMirror.fromTextArea(
	document.getElementById("csoundCodeEditor"), 
	{
		lineNumbers: true,
		theme: "monokai",
    mode: "csound",
		extraKeys: {
			"Ctrl-E": evalCode,
		},
	});

fetch('start.orc').then(function(response) {
  return response.text().then(function(v) {
    editor.setValue(
      ";; Select this code and press ctrl-e to evaluate\n" + v);
  });
});

		</script> 

		<script src="web/cslivecode.js"></script>
		<script>
			Module = {};
			Module['wasmBinaryFile'] = 'web/wasm/libcsound.wasm';
			Module['print'] = console.log;
			Module['printErr'] = console.log;
			Module['onRuntimeInitialized'] = onRuntimeInitialized;

		</script>
		<script src="web/wasm/libcsound.js"></script>
		<script src="web/wasm/FileList.js"></script>
		<script src="web/wasm/CsoundObj.js"></script>

	</body>

</html>
